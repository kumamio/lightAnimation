<!DOCTYPE html>
<html> 
<head> 
<title>index_three</title> 
<script type="text/javascript" src="jquery-1.6.4.js"></script>
<link rel="stylesheet" type="text/css" href="light.css">
</head>
<body > 

<!-- <div class="sky"></div> -->

<div class="scenes">
	<div class="scene scene-city"></div>
	<div class="scene scene-hill"></div>
	<div class="scene scene-land"></div>
	<div class="scene scene-desert"></div>
	<div class="scene scene-sea"></div> 
</div>	

<canvas id="front" ></canvas>
<canvas id="back" ></canvas>

<div class="sun"></div>

<script type="text/javascript">


	var $body = $("body");

	var $scenes = $(".scenes");
	var $sceneCity = $(".scene-city");
	var $sceneHill = $(".scene-hill");
	var $sceneLand = $(".scene-land");
	var $sceneDesert = $(".scene-desert");
	var $sceneSea = $(".scene-sea");

	var clientW = window.innerWidth;
	var clientH = window.innerHeight;

	$body.css({"font-size":clientW/100+"px","width":clientW+"px","height":clientH+"px"});

	$scenes.height(clientH);


	//绘制canvas背景，并填充渐变色
	function drawFront() {
	  var canvas = document.getElementById('front');
	  canvas.width = clientW*5;
	  canvas.height = clientH;

	  // 缩放比率
	  var ratioX = clientW/1000;
	  var ratioY = clientH/1000;

	  if (canvas.getContext) {
	    var ctx = canvas.getContext('2d');
	    ctx.beginPath();

	    var origin = [4*ratioX, 752*ratioY];

	    ctx.moveTo (origin[0], origin[1]);

	    var arr =[,,,,,] , result;


	    function changePoint(arr){
		    arr = arr.map(function(value, index){
		    	return value + origin[(index % 2 == 0) ? 0 : 1];
		    })
	    	origin[0] = arr[4];
	    	origin[1] = arr[5];
	    	ctx.bezierCurveTo(arr[0], arr[1], arr[2], arr[3], arr[4], arr[5]);
	    }

	    var pointList = [[237, 2, 474, 4, 711, 6],[86, 1, 261, 38, 328, -25],[76, -71, 135, -162, 189, -249],[105, -175, 117, 286, 174, 267],[63, -21, 81, -226, 91, -281],[6, -33, 25, -234, 65, -241],[24, -5, 83, 402, 103, 441],[52, 102, 293, 135, 393, 135],[189, -2, 378, -3, 566, -4],[149, -1, 380, 41, 510, -51],[52, -37, 64, -110, 124, -137],[37, -17, 75, -10, 109, 9],[41, 23, 63, -4, 101, -22],[146, -68, 193, 161, 329, 154],[61, -3, 83, -61, 136, -77],[73, -22, 154, 53, 204, 95],[102, 85, 304, 229, 443, 229],[-1526, 0, -3052, 0, -4578, 0]];


	    pointList.map(function(value,index){
	    	
	    	var innerArr = value.map(function(v,i){
	    		return (i % 2 == 0) ? parseInt(v*ratioX) : parseInt(v*ratioY);
	    	})
	    	changePoint(innerArr);
	    	return innerArr;

	    })


		ctx.bezierCurveTo(1*ratioX, 917*ratioY, 3*ratioX, 835*ratioY, 4*ratioX, 752*ratioY);

		var grd = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);

	    grd.addColorStop(0, '#000'); 
	    grd.addColorStop(.16, '#232a35'); 
	    grd.addColorStop(.19, '#232a35');
	    grd.addColorStop(.22, '#006d5f');
	    grd.addColorStop(.33, '#038b79');
	    grd.addColorStop(.48, '#038b79');
	    grd.addColorStop(.50, '#00bf48');
	    grd.addColorStop(.65, '#00bf48');
	    grd.addColorStop(.74, '#984f00');
	    ctx.fillStyle = grd;


	    ctx.fill();

	  }






	};
	drawFront();

	function drawBack(){
		var canvas = document.getElementById('back');
		canvas.width = clientW*5;
		canvas.height = clientH;
		if (canvas.getContext) {
			var ctx = canvas.getContext('2d');
			ctx.rect(0,canvas.height*4/5,canvas.width,canvas.height/5);
			ctx.fill();

		}
	}

	drawBack();

	console.log("frontWidth="+$('#front').width());

	// var i = setInterval("console.log($('#front').css('left'))",1000);

</script>


</body>
</html> 


